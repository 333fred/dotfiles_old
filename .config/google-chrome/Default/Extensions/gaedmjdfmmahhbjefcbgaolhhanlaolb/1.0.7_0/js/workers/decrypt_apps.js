var self;importScripts("/js/workers/lib/require.js"),importScripts("/js/workers/lib/aes.js"),importScripts("/js/workers/lib/hmac-sha1.js"),importScripts("/js/workers/lib/pbkdf2.js"),importScripts("/js/app.js"),self=this,require(["helpers/crypto_helper"],function(CryptoHelper){return self.addEventListener("message",function(e){var app,decryptedSeed,encryptedSeed,error,message;if(message=e.data,"password"===message.cmd)return self.password=message.password;if("app"===message.cmd){app=message.app;try{return encryptedSeed=app.encrypted_seed.replace("\r",""),encryptedSeed=encryptedSeed.replace("\n",""),decryptedSeed=CryptoHelper.decryptAES(app.salt,self.password,encryptedSeed),self.postMessage({cmd:"app-encryption-finished",result:{decrypted_seed:decryptedSeed,unique_id:app.unique_id,success:!0}})}catch(_error){return error=_error,self.close(),self.postMessage({cmd:"app-encryption-finished",result:{unique_id:app.unique_id,success:!1,message:"Failed to decrypt app: "+app.unique_id+"\nencryptedSeed: "+app.encrypted_seed+"\nsalt: "+app.salt}})}}},!1),self.postMessage({cmd:"ready"})});